		.ORIG	x3000
		AND	R0, R0, x0
		AND	R1, R1, x0
		AND	R2, R2, x0
		AND	R3, R3, x0
		AND	R4, R4, x0
		AND	R5, R5, x0
		AND	R6, R6, x0
		AND	R7, R7, x0
		LDI	R0, X
		LDI	R1, Y
		JSR	MULT
		STI	R2, PRODUCT
		
		HALT
X		.FILL	x3100
Y		.FILL	x3101
PRODUCT		.FILL	x3102
QUOTIENT	.FILL	x3103
MODULUS		.FILL	x3104
SaveReg0	.FILL	x0
SaveReg1	.FILL	x0
		

MULT		ST	R0, SaveReg0
		ST	R1, SaveReg1
		AND	R4, R4, x0
		ADD	R4, R4, x1
		ADD	R0, R0, x0
		BRzp	CONTINUE1
		NOT	R0, R0
		ADD	R0, R0, x1
		ADD	R4, R4, #-1
		BR	CONTINUE2
CONTINUE1	BRp	CONTINUE2
		AND	R2, R2, x0
		LDI	R0, SaveReg0
		RET
CONTINUE2	ADD	R1, R1, x0
		BRzp	CONTINUE3
		NOT	R1, R1
		ADD	R1, R1, x1
		ADD	R4, R4, #-1
		BR	CONTINUE4
CONTINUE3	BRp	CONTINUE4
		AND	R2, R2, x0
		LDI	R1, SaveReg1
		RET
CONTINUE4	ADD	R1, R1, x0
LOOP		BRz	CONTINUE5
		ADD	R2, R2, R0
		ADD	R1, R1, #-1
		BR	LOOP
		RET
CONTINUE5	ADD	R4, R4, x0
		BRnp	CONTINUE6
		NOT	R2, R2
		ADD	R2, R2, x1
		LDI	R0, SaveReg0
		LDI	R1, SaveReg1
		RET
CONTINUE6	RET
		.END
		
		
